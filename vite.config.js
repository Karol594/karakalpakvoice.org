import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ğŸ›¡ï¸ ÒšĞĞ£Ğ†ĞŸĞ¡Ğ†Ğ—Ğ”Ğ†Ğš (SECURITY)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  build: {
    // ğŸ”’ Source map Ğ¶Ğ°ÑÑ‹Ñ€Ğ°Ğ¼Ñ‹Ğ· (Ñ…Ğ°ĞºĞµÑ€Ğ»ĞµÑ€ ĞºĞ¾Ğ´Ñ‚Ñ‹ ĞºÓ©Ñ€Ğ¼ĞµĞ¹Ğ´Ñ–)
    sourcemap: false,
    
    // âš¡ Ò®Ğ»ĞºĞµĞ½ Ñ„Ğ°Ğ¹Ğ»Ğ´Ğ°Ñ€Ğ´Ñ‹ Ğ±Ó©Ğ»Ñƒ (Ğ¶Ñ‹Ğ»Ğ´Ğ°Ğ¼ Ğ¶Ò¯ĞºÑ‚ĞµĞ»Ñƒ)
    chunkSizeWarningLimit: 1000,
    
    // ğŸ”’ ĞœĞ¸Ğ½Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ (ĞºĞ¾Ğ´Ñ‚Ñ‹ Ò›Ñ‹ÑÒ›Ğ°Ñ€Ñ‚Ñƒ + Ğ¶Ğ°ÑÑ‹Ñ€Ñƒ)
    minify: 'terser',
    terserOptions: {
      compress: {
        // console.log-Ğ»Ğ°Ñ€Ğ´Ñ‹ Ó©ÑˆÑ–Ñ€Ñƒ (production-Ğ´Ğ°)
        drop_console: true,
        drop_debugger: true,
      },
      mangle: {
        // ĞĞ¹Ğ½Ñ‹Ğ¼Ğ°Ğ»Ñ‹ Ğ°Ñ‚Ñ‚Ğ°Ñ€Ñ‹Ğ½ Ğ±Ò±Ñ€Ğ¼Ğ°Ğ»Ğ°Ñƒ
        safari10: true,
      },
    },
    
    // ğŸ“¦ Chunk ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸ÑÑÑ‹ (Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ)
    rollupOptions: {
      output: {
        manualChunks: {
          // React ĞºÑ–Ñ‚Ğ°Ğ¿Ñ…Ğ°Ğ½Ğ°Ğ»Ğ°Ñ€Ñ‹Ğ½ Ğ±Ó©Ğ»ĞµĞº Ñ„Ğ°Ğ¹Ğ»Ò“Ğ°
          'react-vendor': ['react', 'react-dom', 'react-router-dom'],
          // Lucide Ğ¸ĞºĞ¾Ğ½ĞºĞ°Ğ»Ğ°Ñ€Ñ‹Ğ½ Ğ±Ó©Ğ»ĞµĞº
          'icons': ['lucide-react'],
          // i18n Ğ°ÑƒĞ´Ğ°Ñ€Ğ¼Ğ°
          'i18n': ['i18next', 'react-i18next'],
        },
      },
    },
  },
  
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ğŸ“ Ğ¤ĞĞ™Ğ›Ğ”ĞĞ  ĞšĞĞĞ¤Ğ˜Ğ“Ğ£Ğ ĞĞ¦Ğ˜Ğ¯Ğ¡Ğ«
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  // âœ… Ğ¢Ò®Ğ—Ğ•Ğ¢Ğ†Ğ›Ğ”Ğ†: JSON-Ğ´Ñ‹ Ğ°Ğ»Ñ‹Ğ¿ Ñ‚Ğ°ÑÑ‚Ğ°Ğ´Ñ‹Ğ¼, Ñ‚ĞµĞº Markdown Ò›Ğ°Ğ»Ğ°Ğ´Ñ‹!
  assetsInclude: ['**/*.md'],
  
  // âœ… Public Ğ¿Ğ°Ğ¿ĞºĞ°ÑÑ‹
  publicDir: 'public',
  
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ğŸ–¥ï¸ SERVER ĞšĞĞĞ¤Ğ˜Ğ“Ğ£Ğ ĞĞ¦Ğ˜Ğ¯Ğ¡Ğ« (Development)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  server: {
    port: 3000,
    open: true,
    
    // ğŸ”’ CORS Ò›Ğ¾Ñ€Ò“Ğ°Ğ½Ñ‹ÑÑ‹
    cors: {
      origin: ['http://localhost:3000', 'https://karakalpakvoice.org'],
      credentials: true,
    },
    
    // âš¡ HMR (Hot Module Replacement) Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
    hmr: {
      overlay: true,
    },
  },
  
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ğŸ¨ CSS ĞĞŸĞ¢Ğ˜ĞœĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯Ğ¡Ğ«
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  css: {
    devSourcemap: false, // Production-Ğ´Ğ° CSS sourcemap Ğ¶Ğ¾Ò›
  },
  
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // ğŸ”§ ÒšĞĞ¡Ğ«ĞœĞ¨Ğ ĞŸĞĞ ĞĞœĞ•Ğ¢Ğ Ğ›Ğ•Ğ 
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  
  base: '/',
  
  preview: {
    port: 4173,
    open: true,
  },
});