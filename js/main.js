// KarakalpakVoice.org - Main JavaScript Functions
// –ù–µ–≥—ñ–∑–≥—ñ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–ª–∏–∫ –∂”ô–Ω–µ –∞–Ω–∏–º–∞—Ü–∏—è–ª–∞—Ä

document.addEventListener('DOMContentLoaded', function() {
    initializeCursor();
    initializeParticles();
    initializeScrollEffects();
    initializeAdminPanel();
    initializeRecaptcha();
    initializeAnimations();
});

// –î–æ–º–∞–ª–∞“õ –∫—É—Ä—Å–æ—Ä —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
function initializeCursor() {
    const circleCursor = document.getElementById('circleCursor');
    let mouseX = 0;
    let mouseY = 0;
    
    // –ö—É—Ä—Å–æ—Ä–¥—ã –∂–∞—Å—ã—Ä—ã—û/–∫”©—Ä—Å–µ—Ç–∏—û 
    document.addEventListener('mouseenter', () => {
        circleCursor.style.opacity = '1';
    });
    
    document.addEventListener('mouseleave', () => {
        circleCursor.style.opacity = '0';
    });
    
    // –ö—É—Ä—Å–æ—Ä “õ–æ–∑“ì–∞–ª—ã—Å—ã
    document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
        
        circleCursor.style.left = mouseX + 'px';
        circleCursor.style.top = mouseY + 'px';
    });
    
    // –ö–ª–∏–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏
    document.addEventListener('click', (e) => {
        createClickEffect(e.clientX, e.clientY);
    });
}

// –ö–ª–∏–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏ –∂–∞—Å–∞—û
function createClickEffect(x, y) {
    const clickEffect = document.createElement('div');
    clickEffect.className = 'click-effect';
    clickEffect.innerHTML = '<div class="circle-flag" style="width: 25px; height: 25px;"></div>';
    clickEffect.style.left = (x - 12.5) + 'px';
    clickEffect.style.top = (y - 12.5) + 'px';
    
    document.body.appendChild(clickEffect);
    
    setTimeout(() => {
        if (clickEffect.parentNode) {
            clickEffect.remove();
        }
    }, 1000);
}

// –ñ—É–ª–¥—ã–∑—à–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è—Å—ã
function initializeParticles() {
    function createParticle() {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * window.innerWidth + 'px';
        particle.style.animationDuration = (Math.random() * 5 + 6) + 's';
        particle.style.animationDelay = Math.random() * 2 + 's';
        
        // –ñ—É–ª–¥—ã–∑—à–∞ —Ç“Ø—Å–ª–µ—Ä–∏–Ω —Ç–æ—Å–∞—Ç—Ç–∞–Ω —Ç–∞“£–ª–∞—û
        const colors = ['#ffd700', '#ffffff', '#87ceeb'];
        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
        
        document.body.appendChild(particle);
        
        setTimeout(() => {
            if (particle.parentNode) {
                particle.remove();
            }
        }, 8000);
    }
    
    // –ñ—É–ª–¥—ã–∑—à–∞–ª–∞—Ä–¥—ã –º—É–¥–∞–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏—è–ª–∞—û
    setInterval(createParticle, 300);
    
    // –î”ô—Å–ª–µ–ø–∫–∏ –∂—É–ª–¥—ã–∑—à–∞–ª–∞—Ä –∂–∞—Ä–∞—Ç—ã—û
    for (let i = 0; i < 5; i++) {
        setTimeout(createParticle, i * 200);
    }
}

// Scroll —ç—Ñ—Ñ–µ–∫—Ç–ª–µ—Ä–∏
function initializeScrollEffects() {
    const backToTop = document.getElementById('backToTop');
    
    // Back-to-top —Ç“Ø–π–º–µ—Å–∏–Ω –∫”©—Ä—Å–µ—Ç–∏—û/–∂–∞—Å—ã—Ä—ã—û
    window.addEventListener('scroll', () => {
        if (window.pageYOffset > 300) {
            backToTop.classList.add('visible');
        } else {
            backToTop.classList.remove('visible');
        }
        
        // –ü–∞—Ä–∞–ª–ª–∞–∫—Å —ç—Ñ—Ñ–µ–∫—Ç–∏
        const scrolled = window.pageYOffset;
        const sections = document.querySelectorAll('.content-section');
        
        sections.forEach((section, index) => {
            const rate = scrolled * -0.5;
            section.style.transform = `translateY(${rate * 0.1}px)`;
        });
    });
    
    // Back-to-top —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
    backToTop.addEventListener('click', () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
    
    // Scroll –∞–Ω–∏–º–∞—Ü–∏—è–ª–∞—Ä—ã
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // –ë–∞—Ä–ª—ã“õ content section-–ª–∞—Ä–¥—ã –±–∞“õ–ª–∞—û
    document.querySelectorAll('.content-section, .contact-section, .qr-section, .recaptcha-section').forEach(section => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(30px)';
        section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(section);
    });
}

// Admin –ø–∞–Ω–µ–ª—å —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
function initializeAdminPanel() {
    const adminBtn = document.getElementById('adminBtn');
    
    adminBtn.addEventListener('click', () => {
        openAdminPanel();
    });
}

function openAdminPanel() {
    const password = prompt('Admin –ø–∞–Ω–µ–ª–∏–Ω–µ –∫–∏—Ä–∏—û —É—à—ã–Ω –ø–∞—Ä–æ–ª–¥–∏ –µ–Ω–≥–∏–∑–∏“£:');
    if (password === 'karakalpak2025') {
        showAdminInterface();
    } else if (password !== null) {
        alert('“ö”ô—Ç–µ –ø–∞—Ä–æ–ª! “ö–∞–π—Ç–∞–ª–∞–ø –∫”©—Ä–∏“£–∏–∑.');
    }
}

function showAdminInterface() {
    const adminHTML = `
        <div id="adminModal" style="
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 10001;
            display: flex;
            justify-content: center;
            align-items: center;
        ">
            <div style="
                background: linear-gradient(45deg, #1e6bb8, #ffd700);
                padding: 3rem;
                border-radius: 20px;
                max-width: 600px;
                width: 90%;
                text-align: center;
                color: #000;
                position: relative;
            ">
                <button onclick="closeAdminPanel()" style="
                    position: absolute;
                    top: 10px;
                    right: 15px;
                    background: none;
                    border: none;
                    font-size: 2rem;
                    cursor: pointer;
                    color: #000;
                ">√ó</button>
                
                <h2 style="margin-bottom: 2rem; color: #000;">üîê ADMIN –ü–ê–ù–ï–õ–ò</h2>
                
                <div style="display: grid; gap: 1rem; margin-bottom: 2rem;">
                    <button onclick="addArticle()" style="
                        padding: 1rem;
                        background: #228b22;
                        color: white;
                        border: none;
                        border-radius: 10px;
                        cursor: pointer;
                        font-size: 1.1rem;
                    ">üìù –ñ–∞“£–∞ –º–∞“õ–∞–ª–∞ “õ–æ—Å—É</button>
                    
                    <button onclick="editNews()" style="
                        padding: 1rem;
                        background: #1e6bb8;
                        color: white;
                        border: none;
                        border-radius: 10px;
                        cursor: pointer;
                        font-size: 1.1rem;
                    ">üì∞ –ñ–∞“£–∞–ª—ã“õ–ª–∞—Ä–¥—ã ”©–∑–≥–µ—Ä—Ç–∏—û</button>
                    
                    <button onclick="manageUsers()" style="
                        padding: 1rem;
                        background: #ff6600;
                        color: white;
                        border: none;
                        border-radius: 10px;
                        cursor: pointer;
                        font-size: 1.1rem;
                    ">üë• “ö–æ–ª–ª–∞–Ω—ã—û—à—ã–ª–∞—Ä–¥—ã –±–∞—Å“õ–∞—Ä—ã—û</button>
                    
                    <button onclick="viewStats()" style="
                        padding: 1rem;
                        background: #9932cc;
                        color: white;
                        border: none;
                        border-radius: 10px;
                        cursor: pointer;
                        font-size: 1.1rem;
                    ">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫”©—Ä—É</button>
                    
                    <button onclick="siteSettings()" style="
                        padding: 1rem;
                        background: #dc143c;
                        color: white;
                        border: none;
                        border-radius: 10px;
                        cursor: pointer;
                        font-size: 1.1rem;
                    ">‚öôÔ∏è –°–∞–π—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä–∏</button>
                </div>
                
                <p style="color: #000; font-size: 0.9rem;">
                    Admin –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–ª–∞—Ä—ã –∞—Ä“õ–∞–ª—ã —Å–∞–π—Ç –º–∞–∑–º—É–Ω—ã–Ω –±–∞—Å“õ–∞—Ä—ã—û—ã“£—ã–∑ –º“Ø–º–∫–∏–Ω.
                </p>
            </div>
        </div>
    `;
    
    document.body.insertAdjacentHTML('beforeend', adminHTML);
}

// Admin –ø–∞–Ω–µ–ª–∏–Ω –∂–∞–±—ã—û
function closeAdminPanel() {
    const modal = document.getElementById('adminModal');
    if (modal) {
        modal.remove();
    }
}

// Admin —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
function addArticle() {
    alert('–ú–∞“õ–∞–ª–∞ “õ–æ—Å—ã—û —Ñ—É–Ω–∫—Ü–∏—è—Å—ã —Ç–∞—è—Ä–ª–∞–Ω—ã–ø –∞—Ç—ã—Ä...\n“≤”ô–∑–∏—Ä—à–µ –º–∞“õ–∞–ª–∞ –¥“Ø–∑–µ—Ç–µ—Ç—É“ì—ã–Ω —Ñ–æ—Ä–º–∞ –∞—à—ã–ª–∞—Ä –µ–¥–∏.');
    closeAdminPanel();
}

function editNews() {
    alert('–ñ–∞“£–∞–ª—ã“õ–ª–∞—Ä–¥—ã ”©–∑–≥–µ—Ä—Ç–∏—û —Ñ—É–Ω–∫—Ü–∏—è—Å—ã —Ç–∞—è—Ä–ª–∞–Ω—ã–ø –∞—Ç—ã—Ä...\n–ë–∞—Ä–ª—ã“õ –∂–∞“£–∞–ª—ã“õ–ª–∞—Ä –¥–∏–∑–∏–º–∏–Ω –∫”©—Ä–µ –∞–ª–∞—Ä –µ–¥–∏“£–∏–∑.');
    closeAdminPanel();
}

function manageUsers() {
    alert('“ö–æ–ª–ª–∞–Ω—ã—û—à—ã–ª–∞—Ä–¥—ã –±–∞—Å“õ–∞—Ä—ã—û —Ñ—É–Ω–∫—Ü–∏—è—Å—ã —Ç–∞—è—Ä–ª–∞–Ω—ã–ø –∞—Ç—ã—Ä...\n–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–ª–∞–Ω“ì–∞–Ω “õ–æ–ª–ª–∞–Ω—ã—û—à—ã–ª–∞—Ä –¥–∏–∑–∏–º–∏ –∫”©—Ä–∏–Ω–µ—Ä –µ–¥–∏.');
    closeAdminPanel();
}

function viewStats() {
    const stats = {
        visitors: Math.floor(Math.random() * 10000) + 5000,
        pageViews: Math.floor(Math.random() * 50000) + 25000,
        articles: Math.floor(Math.random() * 100) + 50,
        comments: Math.floor(Math.random() * 500) + 200
    };
    
    alert(`üìä –°–ê–ô–¢ –°–¢–ê–¢–ò–°–¢–ò–ö–ê–°–´:\n\nüë• –ö–µ–ª–∏—û—à–∏–ª–µ—Ä: ${stats.visitors}\nüìÑ –ë–µ—Ç –∫”©—Ä–∏—û–ª–µ—Ä: ${stats.pageViews}\nüìù –ú–∞“õ–∞–ª–∞–ª–∞—Ä: ${stats.articles}\nüí¨ –ü–∏–∫–∏—Ä–ª–µ—Ä: ${stats.comments}\n\n–¢–æ–ª—ã“õ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ–π–∏–Ω “õ–æ—Å—ã–ª–∞–¥—ã...`);
    closeAdminPanel();
}

function siteSettings() {
    alert('–°–∞–π—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏—è—Å—ã —Ç–∞—è—Ä–ª–∞–Ω—ã–ø –∞—Ç—ã—Ä...\n–¢–∏–ª –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä–∏, –¥–∏–∑–∞–π–Ω —Ç–∞“£–ª–∞—û–ª–∞—Ä—ã —Ç.–±.');
    closeAdminPanel();
}

// reCAPTCHA —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
function initializeRecaptcha() {
    const recaptchaCheckbox = document.getElementById('recaptcha');
    
    if (recaptchaCheckbox) {
        recaptchaCheckbox.addEventListener('change', function() {
            if (this.checked) {
                setTimeout(() => {
                    showRecaptchaSuccess();
                }, 1000);
            }
        });
    }
}

function showRecaptchaSuccess() {
    const successMessage = document.createElement('div');
    successMessage.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(45deg, #228b22, #32cd32);
        color: white;
        padding: 2rem;
        border-radius: 15px;
        text-align: center;
        z-index: 10000;
        font-size: 1.2rem;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    `;
    successMessage.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 1rem;">‚úÖ</div>
        <div>reCAPTCHA —Ç–∞–±—ã—Å–ª—ã –æ—Ä—ã–Ω–ª–∞–Ω–¥—ã!</div>
        <div style="font-size: 0.9rem; margin-top: 1rem;">–°–∞–π—Ç—Ç—ã“£ —Ç–æ–ª—ã“õ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—ã–Ω –ø–∞–π–¥–∞–ª–∞–Ω–∞ –∞–ª–∞—Å—ã–∑.</div>
    `;
    
    document.body.appendChild(successMessage);
    
    setTimeout(() => {
        successMessage.remove();
    }, 3000);
}

// –ê–Ω–∏–º–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
function initializeAnimations() {
    // Logo –∞–π–Ω–∞–ª–¥—ã—Ä—ã—û
    const logoIcon = document.querySelector('.logo-icon');
    if (logoIcon) {
        logoIcon.addEventListener('click', () => {
            logoIcon.style.transform = 'rotate(720deg) scale(1.2)';
            setTimeout(() => {
                logoIcon.style.transform = '';
            }, 1000);
        });
    }
    
    // Hero title –∫–ª–∏–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏
    const heroTitle = document.querySelector('.hero-title');
    if (heroTitle) {
        heroTitle.addEventListener('click', () => {
            heroTitle.style.transform = 'scale(1.1) rotateY(360deg)';
            setTimeout(() => {
                heroTitle.style.transform = '';
            }, 500);
        });
    }
    
    // QR –∫–æ–¥ –∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
    const qrCode = document.querySelector('.qr-code');
    if (qrCode) {
        qrCode.addEventListener('click', () => {
            const url = window.location.href;
            const message = `QR –∫–æ–¥ –º”ô–ª–∏–º–µ—Ç–∏:\n\n–°–∞–π—Ç: ${url}\n\n–ë“±–ª QR –∫–æ–¥—Ç—ã —Å–∫–∞–Ω–µ—Ä–ª–µ–ø, —Å–∞–π—Ç—Ç—ã –±–∞—Å“õ–∞–ª–∞—Ä“ì–∞ –±”©–ª–∏—Å–µ –∞–ª–∞—Å—ã–∑!`;
            alert(message);
        });
    }
}

// Keyboard shortcuts
document.addEventListener('keydown', (e) => {
    // Admin –ø–∞–Ω–µ–ª—å: Ctrl+Shift+A
    if (e.ctrlKey && e.shiftKey && e.key === 'A') {
        e.preventDefault();
        openAdminPanel();
    }
    
    // –ñ–æ“ì–∞—Ä—ã“ì–∞ –∫”©—Ç–µ—Ä–∏–ª–∏—û: Home
    if (e.key === 'Home') {
        e.preventDefault();
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }
    
    // –¢”©–º–µ–Ω–≥–µ –∂“Ø—Ä–∏—û: End  
    if (e.key === 'End') {
        e.preventDefault();
        window.scrollTo({
            top: document.body.scrollHeight,
            behavior: 'smooth'
        });
    }
});

// Touch —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–ª–∞—Ä —É—à—ã–Ω
document.addEventListener('touchstart', (e) => {
    // Touch –∫–ª–∏–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏
    if (e.touches.length === 1) {
        const touch = e.touches[0];
        createClickEffect(touch.clientX, touch.clientY);
    }
});

// Performance optimization
window.addEventListener('load', () => {
    // Lazy loading for images
    const images = document.querySelectorAll('img[data-src]');
    const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.removeAttribute('data-src');
                imageObserver.unobserve(img);
            }
        });
    });
    
    images.forEach(img => imageObserver.observe(img));
});

// Error handling
window.addEventListener('error', (e) => {
    console.log('Error caught:', e.error);
});

// Console welcome message
console.log(`
üé§ KarakalpakVoice.org
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Voice of Karakalpakstan - “ö–∞—Ä–∞“õ–∞–ª–ø–∞“õ—Å—Ç–∞–Ω —Ö–∞–ª“õ—ã–Ω—ã“£ –¥–∞—û—ã—Å—ã
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üîß Developer Tips:
‚Ä¢ Admin Panel: Ctrl+Shift+A
‚Ä¢ Password: karakalpak2025
‚Ä¢ Home/End keys for navigation

üåü ‚àûD Design Features Active:
‚Ä¢ Karakalpakstan Flag Cursor
‚Ä¢ Particle Animation System  
‚Ä¢ Responsive Mobile Menu
‚Ä¢ Interactive Elements

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
`);