<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - KarakalpakVoice.org</title>
    <meta name="robots" content="noindex, nofollow">
    <style>
        :root {
            --primary-blue: #00d4ff;
            --secondary-blue: #0099cc;
            --primary-yellow: #ffd700;
            --dark-bg: #1a1a1a;
            --dark-secondary: #2d2d2d;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--dark-secondary) 100%);
            color: var(--white);
            min-height: 100vh;
        }

        .login-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
        }

        .login-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        .login-logo {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--primary-blue), var(--primary-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .login-title {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: var(--white);
        }

        .login-form {
            text-align: left;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--white);
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: var(--white);
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        .login-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary-blue);
            color: var(--white);
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-btn:hover {
            background: var(--secondary-blue);
            transform: translateY(-2px);
        }

        .error-message {
            background: #dc3545;
            color: white;
            padding: 0.8rem;
            border-radius: 8px;
            margin-top: 1rem;
            display: none;
            text-align: center;
        }

        .admin-panel {
            display: none;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--dark-secondary) 100%);
        }

        .admin-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            padding: 1rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--primary-blue), var(--primary-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logout-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .logout-btn:hover {
            background: #c82333;
        }

        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .admin-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 2rem;
            background: linear-gradient(45deg, var(--primary-blue), var(--primary-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .language-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            gap: 1rem;
        }

        .lang-tab {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: var(--white);
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
        }

        .lang-tab.active {
            background: var(--primary-blue);
            border-color: var(--primary-blue);
            color: white;
        }

        .lang-tab:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: var(--primary-blue);
        }

        .article-form {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            padding: 2rem;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 2rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            color: var(--white);
            font-size: 1rem;
            backdrop-filter: blur(10px);
            font-family: inherit;
        }

        .form-group textarea {
            min-height: 200px;
            resize: vertical;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .file-upload {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .file-upload:hover {
            border-color: var(--primary-blue);
            background: rgba(0, 212, 255, 0.1);
        }

        .file-upload input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .file-upload-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .file-upload-text {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .file-upload-hint {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .file-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .preview-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            position: relative;
        }

        .preview-item img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .preview-item video {
            width: 100%;
            height: 120px;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .remove-file {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #dc3545;
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 12px;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .action-btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .publish-btn {
            background: #28a745;
            color: white;
        }

        .publish-btn:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .draft-btn {
            background: var(--primary-yellow);
            color: #333;
        }

        .draft-btn:hover {
            background: #e6c200;
            transform: translateY(-2px);
        }

        .preview-btn {
            background: var(--primary-blue);
            color: white;
        }

        .preview-btn:hover {
            background: var(--secondary-blue);
            transform: translateY(-2px);
        }

        .success-message {
            background: #28a745;
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            text-align: center;
            display: none;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .recent-articles {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            padding: 2rem;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .recent-articles h3 {
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.5rem;
        }

        .article-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .article-info h4 {
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
        }

        .article-meta {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .article-actions {
            display: flex;
            gap: 0.5rem;
        }

        .article-actions button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .edit-btn {
            background: var(--primary-blue);
            color: white;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
        }

        @media (max-width: 768px) {
            .admin-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .language-tabs {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .lang-tab {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .article-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .article-actions {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-logo">üîê</div>
            <h1 class="login-title">Admin Panel</h1>
            <h2 style="font-size: 1rem; margin-bottom: 2rem; color: rgba(255,255,255,0.8);">KarakalpakVoice.org</h2>
            
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="username">–õ–æ–≥–∏–Ω:</label>
                    <input type="text" id="username" required>
                </div>
                
                <div class="form-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="password" required>
                </div>
                
                <button type="submit" class="login-btn">–í–û–ô–¢–ò</button>
                
                <div id="loginError" class="error-message">
                    –ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å!
                </div>
            </form>
            
            <div style="margin-top: 2rem; font-size: 0.8rem; color: rgba(255,255,255,0.5); text-align: center;">
                –¢–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞
            </div>
        </div>
    </div>

    <div id="adminPanel" class="admin-panel">
        <header class="admin-header">
            <div class="admin-logo">“ö–∞—Ä–∞“õ–∞–ª–ø–∞“õ –î–∞—û—ã—Å—ã - Admin</div>
            <button id="logoutBtn" class="logout-btn">–í—ã—Ö–æ–¥</button>
        </header>

        <div class="admin-container">
            <h1 class="admin-title">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—ñ</h1>

            <div id="successMessage" class="success-message">
                –ú–∞“õ–∞–ª–∞ —Å”ô—Ç–ª–∏ –∂–∞—Ä–∏—è–ª–∞–Ω–¥—ã! ‚úÖ
            </div>

            <div class="language-tabs">
                <button class="lang-tab active" data-lang="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
                <button class="lang-tab" data-lang="kaa">üè≥Ô∏è “ö–∞—Ä–∞“õ–∞–ª–ø–∞“õ—à–∞</button>
                <button class="lang-tab" data-lang="en">üá∫üá∏ English</button>
                <button class="lang-tab" data-lang="pl">üáµüá± Polski</button>
            </div>

            <div class="article-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏:</label>
                        <input type="text" id="articleTitle" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫..." required>
                    </div>
                    <div class="form-group">
                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <select id="articleCategory" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                            <option value="news">–ñ–∞“£–∞–ª—ã“õ–ª–∞—Ä</option>
                            <option value="sovereignty">–°—É–≤–µ—Ä–µ–Ω–∏—Ç–µ—Ç</option>
                            <option value="politics">–°–∏—è—Å–∞—Ç</option>
                            <option value="history">–¢–∞—Ä–∏–π—Ö</option>
                            <option value="sport">–°–ø–æ—Ä—Ç</option>
                            <option value="geography">–ì–µ–æ–≥—Ä–∞—Ñ–∏—è</option>
                            <option value="traditions">–î”ô—Å—Ç“Ø—Ä</option>
                            <option value="religion">–î–∏–Ω</option>
                        </select>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏:</label>
                    <textarea id="articleContent" placeholder="–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏ –∏–∑ –±–ª–æ–∫–Ω–æ—Ç–∞..." required></textarea>
                </div>

                <div class="form-group full-width">
                    <label>–ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ):</label>
                    <div class="file-upload" id="fileUpload">
                        <input type="file" id="mediaFiles" multiple accept="image/*,video/*,audio/*">
                        <div class="file-upload-icon">üìÅ</div>
                        <div class="file-upload-text">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞</div>
                        <div class="file-upload-hint">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</div>
                    </div>
                    <div id="filePreview" class="file-preview"></div>
                </div>

                <div class="action-buttons">
                    <button type="button" id="publishBtn" class="action-btn publish-btn">
                        üöÄ –ñ–ê–†–ò–Ø–õ–ê–é
                    </button>
                    <button type="button" id="draftBtn" class="action-btn draft-btn">
                        üíæ –°–ê“ö–¢–ê–é
                    </button>
                    <button type="button" id="previewBtn" class="action-btn preview-btn">
                        üëÅÔ∏è –ö”®–†–£
                    </button>
                </div>
            </div>

            <div class="recent-articles">
                <h3>–°–æ“£“ì—ã –º–∞“õ–∞–ª–∞–ª–∞—Ä</h3>
                <div id="recentArticles">
                    <!-- Articles will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const ADMIN = {
            isLoggedIn: false,
            currentLanguage: 'ru',
            uploadedFiles: []
        };

        const LANGUAGE_CONTENT = {
            ru: { title: '', content: '' },
            kaa: { title: '', content: '' },
            en: { title: '', content: '' },
            pl: { title: '', content: '' }
        };

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            
            console.log('Login attempt:', username, password);
            
            if (username === 'karakalpak' && password === 'voice2025') {
                console.log('Login success');
                ADMIN.isLoggedIn = true;
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                loadRecentArticles();
            } else {
                console.log('Login failed');
                const errorDiv = document.getElementById('loginError');
                errorDiv.style.display = 'block';
                setTimeout(function() {
                    errorDiv.style.display = 'none';
                }, 3000);
            }
        });

        document.getElementById('logoutBtn').addEventListener('click', function() {
            ADMIN.isLoggedIn = false;
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            clearForm();
        });

        document.querySelectorAll('.lang-tab').forEach(function(tab) {
            tab.addEventListener('click', function() {
                LANGUAGE_CONTENT[ADMIN.currentLanguage] = {
                    title: document.getElementById('articleTitle').value,
                    content: document.getElementById('articleContent').value
                };
                
                document.querySelectorAll('.lang-tab').forEach(function(t) {
                    t.classList.remove('active');
                });
                tab.classList.add('active');
                
                ADMIN.currentLanguage = tab.dataset.lang;
                
                document.getElementById('articleTitle').value = LANGUAGE_CONTENT[ADMIN.currentLanguage].title || '';
                document.getElementById('articleContent').value = LANGUAGE_CONTENT[ADMIN.currentLanguage].content || '';
                
                updatePlaceholders(ADMIN.currentLanguage);
            });
        });

        function updatePlaceholders(lang) {
            const placeholders = {
                ru: {
                    title: '–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏...',
                    content: '–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏ –∏–∑ –±–ª–æ–∫–Ω–æ—Ç–∞...'
                },
                kaa: {
                    title: '–ú–∞“õ–∞–ª–∞ –∞—Ç—ã–Ω –∂–∞–∑—ã“£—ã–∑...',
                    content: '–ë–ª–æ–∫–Ω–æ—Ç—Ç–∞–Ω –º–∞“õ–∞–ª–∞ –º”ô—Ç–Ω—ñ–Ω –∫”©—à–∏—Ä–∏“£–∏–∑...'
                },
                en: {
                    title: 'Enter article title...',
                    content: 'Copy article text from notepad...'
                },
                pl: {
                    title: 'Wprowad≈∫ tytu≈Ç artyku≈Çu...',
                    content: 'Skopiuj tekst artyku≈Çu z notatnika...'
                }
            };
            
            if (placeholders[lang]) {
                document.getElementById('articleTitle').placeholder = placeholders[lang].title;
                document.getElementById('articleContent').placeholder = placeholders[lang].content;
            }
        }

        const fileUpload = document.getElementById('fileUpload');
        const mediaFiles = document.getElementById('mediaFiles');
        const filePreview = document.getElementById('filePreview');

        fileUpload.addEventListener('dragover', function(e) {
            e.preventDefault();
            fileUpload.style.borderColor = 'var(--primary-blue)';
            fileUpload.style.background = 'rgba(0, 212, 255, 0.1)';
        });

        fileUpload.addEventListener('dragleave', function(e) {
            e.preventDefault();
            fileUpload.style.borderColor = 'rgba(255, 255, 255, 0.3)';
            fileUpload.style.background = 'transparent';
        });

        fileUpload.addEventListener('drop', function(e) {
            e.preventDefault();
            fileUpload.style.borderColor = 'rgba(255, 255, 255, 0.3)';
            fileUpload.style.background = 'transparent';
            
            const files = Array.from(e.dataTransfer.files);
            handleFiles(files);
        });

        mediaFiles.addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            handleFiles(files);
        });

        function handleFiles(files) {
            files.forEach(function(file) {
                if (file.type.startsWith('image/') || file.type.startsWith('video/') || file.type.startsWith('audio/')) {
                    ADMIN.uploadedFiles.push(file);
                    createFilePreview(file);
                }
            });
        }

        function createFilePreview(file) {
            const previewItem = document.createElement('div');
            previewItem.className = 'preview-item';
            
            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-file';
            removeBtn.innerHTML = '√ó';
            removeBtn.onclick = function() {
                ADMIN.uploadedFiles = ADMIN.uploadedFiles.filter(function(f) {
                    return f !== file;
                });
                previewItem.remove();
            };
            
            if (file.type.startsWith('image/')) {
                const img = document.createElement('img');
                img.src = URL.createObjectURL(file);
                previewItem.appendChild(img);
            } else if (file.type.startsWith('video/')) {
                const video = document.createElement('video');
                video.src = URL.createObjectURL(file);
                video.controls = true;
                previewItem.appendChild(video);
            } else if (file.type.startsWith('audio/')) {
                const audio = document.createElement('audio');
                audio.src = URL.createObjectURL(file);
                audio.controls = true;
                previewItem.appendChild(audio);
            }
            
            const fileName = document.createElement('div');
            fileName.textContent = file.name;
            fileName.style.fontSize = '0.8rem';
            fileName.style.marginTop = '0.5rem';
            fileName.style.wordBreak = 'break-all';
            
            previewItem.appendChild(removeBtn);
            previewItem.appendChild(fileName);
            filePreview.appendChild(previewItem);
        }

        document.getElementById('publishBtn').addEventListener('click', function() {
            if (validateForm()) {
                publishArticle();
            }
        });

        document.getElementById('draftBtn').addEventListener('click', function() {
            saveDraft();
        });

        document.getElementById('previewBtn').addEventListener('click', function() {
            previewArticle();
        });

        function validateForm() {
            const title = document.getElementById('articleTitle').value.trim();
            const content = document.getElementById('articleContent').value.trim();
            const category = document.getElementById('articleCategory').value;
            
            if (!title) {
                alert('–ú–∞“õ–∞–ª–∞ –∞—Ç—ã–Ω –∂–∞–∑—ã“£—ã–∑!');
                return false;
            }
            
            if (!content) {
                alert('–ú–∞“õ–∞–ª–∞ –º–∞–∑–º—É–Ω—ã–Ω –∂–∞–∑—ã“£—ã–∑!');
                return false;
            }
            
            if (!category) {
                alert('–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–∞“£–¥–∞“£—ã–∑!');
                return false;
            }
            
            return true;
        }

        function publishArticle() {
            LANGUAGE_CONTENT[ADMIN.currentLanguage] = {
                title: document.getElementById('articleTitle').value,
                content: document.getElementById('articleContent').value
            };
            
            const article = {
                id: Date.now(),
                category: document.getElementById('articleCategory').value,
                languages: LANGUAGE_CONTENT,
                files: ADMIN.uploadedFiles.map(function(file) {
                    return {
                        name: file.name,
                        type: file.type,
                        size: file.size,
                        url: URL.createObjectURL(file)
                    };
                }),
                publishDate: new Date().toISOString(),
                status: 'published'
            };
            
            const articles = JSON.parse(localStorage.getItem('kv_articles') || '[]');
            articles.unshift(article);
            localStorage.setItem('kv_articles', JSON.stringify(articles));
            
            const successMsg = document.getElementById('successMessage');
            successMsg.style.display = 'block';
            setTimeout(function() {
                successMsg.style.display = 'none';
            }, 3000);
            
            clearForm();
            loadRecentArticles();
        }

        function saveDraft() {
            alert('–ú–∞“õ–∞–ª–∞ —Å–∞“õ—Ç–∞–ª–¥—ã! üíæ');
        }

        function previewArticle() {
            const title = document.getElementById('articleTitle').value;
            const content = document.getElementById('articleContent').value;
            
            if (!title || !content) {
                alert('–ê–ª–¥—ã–º–µ–Ω –º–∞“õ–∞–ª–∞ –∞—Ç—ã–Ω –∂”ô–Ω–µ –º–∞–∑–º—É–Ω—ã–Ω —Ç–æ–ª—Ç—ã—Ä—ã“£—ã–∑!');
                return;
            }
            
            const previewWindow = window.open('', '_blank', 'width=800,height=600');
            previewWindow.document.write('<h1>' + title + '</h1><p>' + content + '</p>');
        }

        function clearForm() {
            document.getElementById('articleTitle').value = '';
            document.getElementById('articleContent').value = '';
            document.getElementById('articleCategory').value = '';
            document.getElementById('mediaFiles').value = '';
            filePreview.innerHTML = '';
            ADMIN.uploadedFiles = [];
            
            Object.keys(LANGUAGE_CONTENT).forEach(function(lang) {
                LANGUAGE_CONTENT[lang] = { title: '', content: '' };
            });
            
            document.querySelectorAll('.lang-tab').forEach(function(t) {
                t.classList.remove('active');
            });
            document.querySelector('.lang-tab[data-lang="ru"]').classList.add('active');
            ADMIN.currentLanguage = 'ru';
            updatePlaceholders('ru');
        }

        function loadRecentArticles() {
            const articles = JSON.parse(localStorage.getItem('kv_articles') || '[]');
            const recentContainer = document.getElementById('recentArticles');
            
            if (articles.length === 0) {
                recentContainer.innerHTML = '<p style="text-align: center; color: rgba(255,255,255,0.6);">–ú–∞“õ–∞–ª–∞–ª–∞—Ä –∂–æ“õ</p>';
                return;
            }
            
            recentContainer.innerHTML = articles.slice(0, 10).map(function(article) {
                return '<div class="article-item"><div class="article-info"><h4>' + 
                (article.languages.ru?.
                 title || article.languages.kaa?.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è') + 
                '</h4><div class="article-meta">' + 
                article.category + ' ‚Ä¢ ' + new Date(article.publishDate).toLocaleDateString() + ' ‚Ä¢ ' + article.status +
                '</div></div><div class="article-actions">' +
                '<button class="edit-btn" onclick="editArticle(\'' + article.id + '\')">‚úèÔ∏è</button>' +
                '<button class="delete-btn" onclick="deleteArticle(\'' + article.id + '\')">üóëÔ∏è</button>' +
                '</div></div>';
            }).join('');
        }

        function editArticle(id) {
            const articles = JSON.parse(localStorage.getItem('kv_articles') || '[]');
            const article = articles.find(function(a) { return a.id == id; });
            
            if (article) {
                document.getElementById('articleCategory').value = article.category;
                LANGUAGE_CONTENT = article.languages;
                
                document.getElementById('articleTitle').value = article.languages[ADMIN.currentLanguage]?.title || '';
                document.getElementById('articleContent').value = article.languages[ADMIN.currentLanguage]?.content || '';
                
                ADMIN.uploadedFiles = article.files || [];
                
                document.querySelector('.article-form').scrollIntoView({ behavior: 'smooth' });
            }
        }

        function deleteArticle(id) {
            if (confirm('–ú–∞“õ–∞–ª–∞–Ω—ã ”©—à—ñ—Ä—É–≥–µ —Å–µ–Ω—ñ–º–¥—ñ—Å—ñ–∑ –±–µ?')) {
                const articles = JSON.parse(localStorage.getItem('kv_articles') || '[]');
                const filteredArticles = articles.filter(function(a) { return a.id != id; });
                localStorage.setItem('kv_articles', JSON.stringify(filteredArticles));
                loadRecentArticles();
                alert('–ú–∞“õ–∞–ª–∞ ”©—à—ñ—Ä—ñ–ª–¥—ñ!');
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            updatePlaceholders('ru');
        });

        console.log('üîê KarakalpakVoice.org Admin Panel –≥–æ—Ç–æ–≤!');
        console.log('üì± –õ–æ–≥–∏–Ω: karakalpak | –ü–∞—Ä–æ–ª—å: voice2025');
    </script>
</body>
</html>
